{"ast":null,"code":"import _regeneratorRuntime from\"/home/bagus/frontend-deployment-final-project-v1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/bagus/frontend-deployment-final-project-v1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/bagus/frontend-deployment-final-project-v1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddPhoto=function AddPhoto(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),imageUrl=_useState2[0],setImageUrl=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),captions=_useState4[0],setCaptions=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),secret=_useState6[0],setSecret=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var navigate=useNavigate();var addPhoto=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var makeData,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;e.preventDefault();// object berisi data yang akan dipost\nmakeData={imageUrl:imageUrl,captions:captions,createdAt:\"2022-11-12\",updatedAt:\"2022-11-12\",secret:secret};if(!(secret===\"password\")){_context.next=10;break;}_context.next=6;return fetch(\"https://gallery-app-server.vercel.app/photos\",{//fetch url\nmethod:\"POST\",//request API dengan method POST\nheaders:{\"Content-Type\":\"application/json\"//value dari headers\n},body:JSON.stringify(makeData)//mengisi body dengan object makeData\n});case 6:response=_context.sent;navigate(\"/photos\");//ketika berhasil di post akan mengalihkan halaman ke photos\n_context.next=11;break;case 10:setError(\"You are not authorized\");//pesan eror\ncase 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function addPhoto(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-msg\",children:error}),/*#__PURE__*/_jsxs(\"form\",{className:\"add-form\",onSubmit:addPhoto,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Image Url:\",/*#__PURE__*/_jsx(\"input\",{className:\"add-input\",type:\"text\",\"data-testid\":\"imageUrl\",value:imageUrl,onChange:function onChange(e){return setImageUrl(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Captions:\",/*#__PURE__*/_jsx(\"input\",{className:\"add-input\",type:\"text\",\"data-testid\":\"captions\",value:captions,onChange:function onChange(e){return setCaptions(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Secret:\",/*#__PURE__*/_jsx(\"input\",{className:\"add-input\",type:\"text\",value:secret,\"data-testid\":\"secret\",onChange:function onChange(e){return setSecret(e.target.value);}})]}),/*#__PURE__*/_jsx(\"input\",{className:\"submit-btn\",type:\"submit\",value:\"Submit\",\"data-testid\":\"submit\"})]})]})});};export default AddPhoto;","map":{"version":3,"names":["useState","useNavigate","AddPhoto","imageUrl","setImageUrl","captions","setCaptions","secret","setSecret","error","setError","navigate","addPhoto","e","preventDefault","makeData","createdAt","updatedAt","fetch","method","headers","body","JSON","stringify","response","console","log","target","value"],"sources":["/home/bagus/frontend-deployment-final-project-v1/src/routes/AddPhoto.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst AddPhoto = () => {\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [captions, setCaptions] = useState(\"\");\n  const [secret, setSecret] = useState(\"\");\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  const addPhoto = async (e) => {\n    try{\n      e.preventDefault();\n\n      // object berisi data yang akan dipost\n      const makeData = {\n        imageUrl,\n        captions,\n        createdAt: \"2022-11-12\",\n        updatedAt: \"2022-11-12\", \n        secret\n      }\n      \n      if(secret === \"password\"){ //pengecekan apakah secret yang dimasukkan bernilai password\n        const response = await fetch(\"https://gallery-app-server.vercel.app/photos\", { //fetch url\n          method: \"POST\", //request API dengan method POST\n          headers: {\n            \"Content-Type\": \"application/json\" //value dari headers\n          },\n          body: JSON.stringify(makeData) //mengisi body dengan object makeData\n        })\n        navigate(\"/photos\") //ketika berhasil di post akan mengalihkan halaman ke photos\n      }else{\n        setError(\"You are not authorized\") //pesan eror\n      }\n    }catch(e){\n      console.log(e)\n    }\n  };\n\n  return (\n    <>\n      <div className=\"container\">\n      {error && <div className=\"error-msg\">{error}</div>}\n        <form className=\"add-form\"  onSubmit={addPhoto}>\n          <label>\n            Image Url:\n            <input\n              className=\"add-input\"\n              type=\"text\"\n              data-testid=\"imageUrl\"\n              value={imageUrl}\n              onChange={(e) => setImageUrl(e.target.value)}\n            />\n          </label>\n          <label>\n            Captions:\n            <input\n              className=\"add-input\"\n              type=\"text\"\n              data-testid=\"captions\"\n              value={captions}\n              onChange={(e) => setCaptions(e.target.value)}\n            />\n          </label>\n          <label>\n            Secret:\n            <input\n              className=\"add-input\"\n              type=\"text\"\n              value={secret}\n              data-testid=\"secret\"\n              onChange={(e) => setSecret(e.target.value)}\n            />\n          </label>\n          <input className=\"submit-btn\" type=\"submit\" value=\"Submit\" data-testid=\"submit\" />\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default AddPhoto;"],"mappings":"kaAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,6IAE/C,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACrB,cAAgCF,QAAQ,CAAC,EAAE,CAAC,wCAArCG,QAAQ,eAAEC,WAAW,eAC5B,eAAgCJ,QAAQ,CAAC,EAAE,CAAC,yCAArCK,QAAQ,eAAEC,WAAW,eAC5B,eAA4BN,QAAQ,CAAC,EAAE,CAAC,yCAAjCO,MAAM,eAAEC,SAAS,eACxB,eAA0BR,QAAQ,CAAC,IAAI,CAAC,yCAAjCS,KAAK,eAAEC,QAAQ,eACtB,GAAMC,SAAQ,CAAGV,WAAW,EAAE,CAE9B,GAAMW,SAAQ,4FAAG,iBAAOC,CAAC,0JAErBA,CAAC,CAACC,cAAc,EAAE,CAElB;AACMC,QAAQ,CAAG,CACfZ,QAAQ,CAARA,QAAQ,CACRE,QAAQ,CAARA,QAAQ,CACRW,SAAS,CAAE,YAAY,CACvBC,SAAS,CAAE,YAAY,CACvBV,MAAM,CAANA,MACF,CAAC,MAEEA,MAAM,GAAK,UAAU,iDACCW,MAAK,CAAC,8CAA8C,CAAE,CAAE;AAC7EC,MAAM,CAAE,MAAM,CAAE;AAChBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAmB;AACrC,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,QAAQ,CAAE;AACjC,CAAC,CAAC,QANIS,QAAQ,eAOdb,QAAQ,CAAC,SAAS,CAAC,CAAC;AAAA,+BAEpBD,QAAQ,CAAC,wBAAwB,CAAC,CAAC;AAAA,yFAGrCe,OAAO,CAACC,GAAG,aAAG,sEAEjB,kBA5BKd,SAAQ,4CA4Bb,CAED,mBACE,sCACE,aAAK,SAAS,CAAC,WAAW,WACzBH,KAAK,eAAI,YAAK,SAAS,CAAC,WAAW,UAAEA,KAAK,EAAO,cAChD,cAAM,SAAS,CAAC,UAAU,CAAE,QAAQ,CAAEG,QAAS,wBAC7C,mDAEE,cACE,SAAS,CAAC,WAAW,CACrB,IAAI,CAAC,MAAM,CACX,cAAY,UAAU,CACtB,KAAK,CAAET,QAAS,CAChB,QAAQ,CAAE,kBAACU,CAAC,QAAKT,YAAW,CAACS,CAAC,CAACc,MAAM,CAACC,KAAK,CAAC,EAAC,EAC7C,GACI,cACR,kDAEE,cACE,SAAS,CAAC,WAAW,CACrB,IAAI,CAAC,MAAM,CACX,cAAY,UAAU,CACtB,KAAK,CAAEvB,QAAS,CAChB,QAAQ,CAAE,kBAACQ,CAAC,QAAKP,YAAW,CAACO,CAAC,CAACc,MAAM,CAACC,KAAK,CAAC,EAAC,EAC7C,GACI,cACR,gDAEE,cACE,SAAS,CAAC,WAAW,CACrB,IAAI,CAAC,MAAM,CACX,KAAK,CAAErB,MAAO,CACd,cAAY,QAAQ,CACpB,QAAQ,CAAE,kBAACM,CAAC,QAAKL,UAAS,CAACK,CAAC,CAACc,MAAM,CAACC,KAAK,CAAC,EAAC,EAC3C,GACI,cACR,cAAO,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAY,QAAQ,EAAG,GAC7E,GACH,EACL,CAEP,CAAC,CAED,cAAe1B,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}