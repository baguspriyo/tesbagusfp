{"ast":null,"code":"import _regeneratorRuntime from\"/home/bagus/frontend-deployment-final-project-v1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/bagus/frontend-deployment-final-project-v1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/bagus/frontend-deployment-final-project-v1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect}from\"react\";import{useState}from\"react\";import Card from\"../components/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Photos=function Photos(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),photos=_useState2[0],setPhotos=_useState2[1];var _useState3=useState(\"asc\"),_useState4=_slicedToArray(_useState3,2),sort=_useState4[0],setSort=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),submited=_useState6[0],setSubmited=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var deletePhoto=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://gallery-app-server.vercel.app/photos\",{method:\"DELETE\"}).then(function(response){return response.json();}).then(function(response){setPhotos(function(response){return response.filter(function(photo){return photo.id!==id;});});});case 2:response=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function deletePhoto(_x){return _ref.apply(this,arguments);};}();var dataFetch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url,response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;url=\"https://gallery-app-server.vercel.app/photos\";_context2.next=4;return fetch(url);case 4:response=_context2.sent;_context2.next=7;return response.json();case 7:data=_context2.sent;setPhotos(data);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);setError(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function dataFetch(){return _ref2.apply(this,arguments);};}();var dataSort=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(order,search){var url,response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;url=\"https://gallery-app-server.vercel.app/photos\";_context3.next=4;return fetch(url);case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:data=_context3.sent;setPhotos(data);_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);setError(_context3.t0);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function dataSort(_x2,_x3){return _ref3.apply(this,arguments);};}();useEffect(function(){setLoading(true);dataSort(sort,submited);setLoading(false);},[sort,submited]);useEffect(function(){setLoading(true);dataFetch();setLoading(false);},[]);if(error)return/*#__PURE__*/_jsx(\"h1\",{style:{width:\"100%\",textAlign:\"center\",marginTop:\"20px\"},children:\"Error!\"});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"options\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return setSort(e.target.value);},\"data-testid\":\"sort\",className:\"form-select\",style:{},children:[/*#__PURE__*/_jsx(\"option\",{value:\"asc\",children:\"Ascending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"desc\",children:\"Descending\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();setSubmited(search);},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",\"data-testid\":\"search\",onChange:function onChange(e){return setSearch(e.target.value);},className:\"form-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Search\",\"data-testid\":\"submit\",className:\"form-btn\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:loading?/*#__PURE__*/_jsx(\"h1\",{style:{width:\"100%\",textAlign:\"center\",marginTop:\"20px\"},children:\"Loading...\"}):photos.map(function(photo){return/*#__PURE__*/_jsx(Card,{photo:photo,deletePhoto:deletePhoto},photo.id);})})]})});};export default Photos;","map":{"version":3,"names":["useEffect","useState","Card","Photos","photos","setPhotos","sort","setSort","submited","setSubmited","search","setSearch","loading","setLoading","error","setError","deletePhoto","id","fetch","method","then","response","json","filter","photo","dataFetch","url","data","dataSort","order","width","textAlign","marginTop","e","target","value","preventDefault","map"],"sources":["/home/bagus/frontend-deployment-final-project-v1/src/routes/Photos.jsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport Card from \"../components/Card\";\n\nconst Photos = () => {\n  const [photos, setPhotos] = useState([]);\n  const [sort, setSort] = useState(\"asc\");\n  const [submited, setSubmited] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const deletePhoto = async (id) => {\n    const response = await fetch(`https://gallery-app-server.vercel.app/photos`, {\n      method: \"DELETE\"\n    })\n    .then((response) => response.json())\n    .then((response) => {\n      setPhotos(response => {\n        return response.filter(photo => \n          photo.id !== id\n        )\n      })\n    })\n  };\n\n  const dataFetch = async () => {\n    try{\n      const url = \"https://gallery-app-server.vercel.app/photos\"\n      const response = await fetch(url)\n      const data = await response.json()\n      setPhotos(data)\n    }catch(e){\n      setError(e)\n    }\n  }\n\n  const dataSort = async (order, search) => {\n    try{\n      const url = `https://gallery-app-server.vercel.app/photos`\n      const response = await fetch(url)\n      const data = await response.json()\n      setPhotos(data)\n    }catch(e){\n      setError(e)\n    }\n  }\n\n\n  useEffect(() => {\n    setLoading(true);\n    dataSort(sort, submited)\n    setLoading(false)\n  }, [sort, submited]);\n\n  useEffect(() => {\n    setLoading(true);\n    dataFetch()\n    setLoading(false)\n  }, []);\n\n  if (error) return <h1 style={{ width: \"100%\", textAlign: \"center\", marginTop: \"20px\" }} >Error!</h1>;\n\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"options\">\n          <select\n            onChange={(e) => setSort(e.target.value)}\n            data-testid=\"sort\"\n            className=\"form-select\"\n            style={{}}\n          >\n            <option value=\"asc\">Ascending</option>\n            <option value=\"desc\">Descending</option>\n          </select>\n          <form\n            onSubmit={(e) => {\n              e.preventDefault();\n              setSubmited(search);\n            }}\n          >\n            <input\n              type=\"text\"\n              data-testid=\"search\"\n              onChange={(e) => setSearch(e.target.value)}\n              className=\"form-input\"\n            />\n            <input\n              type=\"submit\"\n              value=\"Search\"\n              data-testid=\"submit\"\n              className=\"form-btn\"\n            />\n          </form>\n        </div>\n        <div className=\"content\">\n          {loading ? (\n            <h1\n              style={{ width: \"100%\", textAlign: \"center\", marginTop: \"20px\" }}\n            >\n              Loading...\n            </h1>\n          ) : (\n            photos.map((photo) => {\n              return (\n                <Card key={photo.id} photo={photo} deletePhoto={deletePhoto} />\n              );\n            })\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Photos;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}